# MCM2017C


## 1.问题的综述

### 1.1问题描述

美国许多地区由于道路的数量限制，交通容量有限。例如，在大西雅图地区，由于交通量超过道路网络的设计容量，司机在交通高峰时段经历长时间的延误。这在5号，90号和405号州际公路以及520号国道在这个问题上显得尤为明显。

自动驾驶车己经作为增加公路能力而不用拓宽车道的方案提出，但是在这一点上，人们并未很好的理解自动驾驶车与现有交通工具的关系。华盛顿州州长要求就自动驾驶车对于Thurston, Pierce和Snohomish等地交通的影响。(详情请参见提供的地图和Excel表格)。重点是当这种自动驾驶车的数量占比从10%增加到50%后，效果会有什么变化?到90%呢?其中是否存在均衡点?是否有明显的变化临界点?假设条件满足，是否应该为这些车设立专用车道?你的模型分析是否提出了改善政策的建议?

你需要构建一个模型，包括对车道流量，峰值、（和/或）平均交通量，以及自动驾驶车所占的比例 的协作系统。你的模型分析应该含有对自动驾驶车和非自动驾驶车之间的关系分析。你的模型分
析应该满足附件中Excel提供的指定道路数据。

你的MCM文件应该包括:1页摘要表，1-2页的州长回信，以及你的解决方案(不超过20页)，整份文件最多23页，注:附录和参考文献不计入23页的限制当中。

一些有用的背景信息：

- 平均而言，每日交通量的8％发生在高峰旅行时间。 
- 所有这些道路的名义速度限制为每小时60英里。
- 里程数从南到北，从西到东。
- 车道宽度是标准的12英尺。
- 高速公路90被分类为状态路线，直到它与州际5相交。
- 

如果此问题中提供的数据与任何其他来源之间存在冲突，请使用这个问题提供的数据。
定义：

- milepost：在路上测量距离，从路线的起点或a状态边界。
- 平均每日交通量：在道路上行驶的平均每天的汽车数量。
- 州际公路：作为国家系统的一部分的有限进出高速公路。
- 国家路线：可能受限或不受限制的国家公路。
- 路由ID：高速公路的编号。
- 增加方向：N-S道北行，E-W道东行。
- 下降方向：N-S道南行，E-W道西行。

{{<figure src="/images/map.png" width="80%">}}

### 1.2参赛状况

#### 2.1 选题情况

MCM2017年参赛队伍为8843对，其中1527队（17%）选择C题，美国队伍311队。

#### 2.2 获奖情况

O奖获奖比例为0.16%，F奖获奖比例0.27%，M奖获奖比例8.88%，H奖获奖比例37.97%，S奖获奖比例51.55%；

获奖队伍：#55583上海交通大学，#55261加州伯克利大学，#55585上海交通大学，#55278上海交通大学

## 2.问题的背景资料

### 2.1问题应用背景

车辆在行车道上受阻的现象我们称之为交通拥堵现象。交通拥堵问题引起了诸多方面的困扰。首先，由于交通的不畅通，车辆在道路上行驶缓慢，最直接的影响是增加了居民的出行时间和成本。出行成本的增加，不仅浪费了时间，最主要是降低了办事效率。

城市道路是由错综复杂的路段和交叉口组成的，不同时间、地点的交通流组成和流量有差异，交通拥堵产生的原因、发生地点、影响范围也不一样，表现出明显的时间和空间分布特性。

### 2.2问题技术背景

单双号限行：执行单双号限行政策。这样既公平，又可以减少出行车辆，达到缓解交通拥堵的目的。

道路建设：减少分叉道路的使用，此中方法包括高架道路，铁路地下化，地下行车道等。发现公共交通系统，都能有效缓解塞车。

完善交通运输系统和智能公共管理系统：提高我国交通管理方面的智能化，可以大大降低交通拥堵带来的不便。

## 3.本问题的常用建模思路

1.宏观方法：不关心单个车辆的特性，利用流体力学的方法研究 道路上所有车辆的集体平均行为–流体力学连续模型
2.微观方法：从单个车辆的动力学行为入手，通过考察单个车辆之间的相互作用，推导出整个系统的统计性质–车辆跟驰模型、元胞自动机模型
3.介观方法：将交通流中的车辆看成具有相互作用的粒子，然后利用分子动理论对交通进行来研究–气体分子动理论模型

4.交通流元胞自动机模型:采用离散的时间和空间变量，用一系列的演化规则来描述车辆间的微观相互作用，进而推出系统的动态演化规律。不同于一般的动力学模型，元胞自动机不是由严格定义的物理方程或函数确定，而是用一系列模型构造的规则构成。凡是满足这些规则的模型都可以算作是元胞自动机模型。因此，元胞自动机是一类模型的总称，或者说是一个方法框架。其特点是时间、空间、状态都离散，每个变量只取有限多个状态，且其状态改变的规则在时间和空间上都是局部的。 

## 4.模型的相关介绍

### 4.1建模假设

1. 所有车辆一致（尺寸外形），将所有车辆看作一致的对象点；
2. 车辆在弯道处与在直道处行为相同，即忽略弯道；
3. 非自动驾驶车辆行驶时与前车保持安全距离，自动驾驶车辆与前车距离大幅度减小；
4. 非自动驾驶车辆制动时，驶过安全距离后完全停止；启动时，与前车距离达到安全距离时启动；
5. 道路上所有非自动驾驶车辆和自动驾驶车辆同一时刻以同一速度行驶；
6. 自动驾驶车辆具有完美的控制能力和毫无缺陷的安全性能；
7. 自动驾驶车辆比非自动驾驶车辆具有更高的平均速度；
8. 同一天之内输入道路的交通量与时间呈双高斯分布；

### 4.2模型的解释与分析

#### 4.2.1符号定义

$$
\begin{array}{c l c l}
\hline
d_{sn}&非自动驾驶车辆行驶安全距离&d_{ss}&自动驾驶车辆行驶安全距离\\l&路面宽度&N&指定范围的车辆占有路面面积\\a&指定范围路面面积&\widetilde{v}&车辆平均速度\\s&自动驾驶车辆占比&d_c&当前车道与前车距离\\d_l&左侧车道与前车距离&d_r&右侧车道与前车距离\\d_{bl}&左侧车道与后车距离&d_{br}&右侧车道与后车距离\\v_f&名义限速(60英里每时)&D&平均车长(4m)\\\rho_{max}&最大车辆密度&\epsilon&比例系数\\
\hline
\end{array}
$$

#### 4.2.2模型解释

1. 空间和时间离散化：将道路分为大小一致、等距离的元胞，用大小为6×1000的矩阵表示。每个元胞中可最多容纳2单位车辆；时间以秒计，每一秒钟对应矩阵(空间)的不同状态；模型当中给定时间为实际时间的万分之一；

2. 入口车流量：每一次状态更新，初始化驶入道路的第一、二排车辆，即矩阵第一列值。数量由交通量随时间的双高斯分布给定一比例系数$\epsilon$乘以路面宽度确定：

   

   $$
   N_0(t)=\epsilon(t)\times l\tag{1}
   $$

   

3. 车流量输入分布：

   

   $$
   \epsilon(t)=e^{-\frac{ {(t-72)}^2}{800} }+0.9e^{-\frac{ {(t-136)}^2}{1250} }\quad 0\leq t\leq 192(0.125h)\tag{2}
   $$

   

   其中峰值出现在一天中的9时和17时。

4. 自动驾驶车辆在更新入口车流量时按照给定比例$s(0\sim1)$设置，该比例为其数量为：

   

   $$
   N_d=N_0\times s\tag{3}
   $$

   

5. 车速：此时对单位车辆，车辆的前进速度也离散化，以每秒移动的格数计，如每秒移动一格记车速为1。对不同时刻道路车流的整体平均车速，由当前车辆密度$\rho$及速度-密度模型[^1]确定，当密度处于不同区间时，车速与密度为不同的函数关系：

   

   $$
   v(t)=
   \begin{aligned}\begin{cases}v_f\times(1-e^{\frac{\rho_{max} }{\rho} })\quad &0\leqslant\rho \leqslant 0.2\\v_f\times(1-\frac{\rho}{\rho_{max} })\quad &0.2<\rho\leqslant 0.4\\v_f\times ln(\frac{\rho_{max} }{\rho})\quad &\rho >0.4\end{cases}\end{aligned}\tag{4}
   $$

   

6. 车辆状态更新：每辆非自动驾驶车辆的下一个状态由其当前车道情况确定，自动驾驶车辆的下一个状态由当前车道及左右侧方车道情况确定；自动驾驶车辆随时变道超车，其变道动机：

   

   $$
   \{d_l> d_c\cap d_{bl}\ge d_s\} \cup \{d_r> d_c\cap d_{br}\geq d_s\}\tag{5}
   $$

   

   非自动驾驶车辆一般情况下不变道，当后方堆积大量车辆时才变道；

7. 非自动驾驶车辆行驶时，一辆占据一个格子，其中包括了安全距离$d_{sn}$；静止时，两辆非自动驾驶车辆占据一个格子；两辆自动驾驶车辆占据一个格子:

    

   $$
   D+d_{sn}\approx 2(D+d_{ss})\tag{6}
   $$

8. 评价指标：对同一天不同时段道路的交通状况的评价指标为道路的负载情况$\rho$和通行能力$\phi$，前者按单位路面的占有率计：

   

   $$
   \rho(t)=\frac{\partial{N(a,t)} }{\partial{a} }\tag{7}
   $$
   

   后者由车流量$\phi$指出：

   

$$
\phi(t)=\rho(t)\times v(t)\tag{8}
$$





#### 4.2.3模型分析

1. 分析当自动驾驶车辆在所有车辆中所占不同比例的情况下，同一时刻整个道路的负载情况和通行能力，和车辆的平均速度，进行作图比较。所测试比例分别为0%，10%，20%，30%，40%，50%，60%，70%，80%，90%和100%；
2. 分析当设置自动驾驶专用车道时，道路的负载情况，通行能力和平均速度变化，作图比较。

### 4.3实验结果及可视化

#### 4.3.1无自动驾驶专用车道

**1.不同自动驾驶车辆占比情况下道路负载情况随时间变化**

通过变化曲线可以看到，0%~60%的自动驾驶汽车占比对于减缓道路负载的作用是巨大的，高峰时段负载降低约50%左右；更高比例的自动驾驶汽车的降低空间逐渐缩小。

{{<figure src="/images/11.png" width="60%">}}

**2.不同自动驾驶车辆占比情况下道路通行能力随时间变化**

同样地，0%~60%的的自动驾驶汽车占比将整体车辆均速提升100%左右，尤其对于高峰时段的车流，其道路状况与非高峰时段的差距缩小，有效减轻高峰期道路压力。（速度较大的提升很大程度上依赖于假设(6)）

{{<figure src="/images/10.png" width="60%">}}

**3.不同自动驾驶车辆占比情况下车辆平均速度随时间变化**

对道路通行能力提升最大的依旧是占比位于0~60%之间的自动驾驶汽车数量，占比为60%时此参数达到峰值。占比超过60%时，过多的自动驾驶汽车反而是通行能力有所降低。另外。从曲线变化趋势可以看到，自动驾驶汽车对提升道路通行能力作用最大的时段为高峰时段，非高峰时段提升较小。

{{<figure src="/images/09.png" width="60%">}}

**4.道路平均占用率随自动驾驶汽车占比的变化趋势**

自动驾驶汽车对高峰期道路状况的优化程度较高于其余时段。另外，可以更清晰地看到，30%~60%的占比对其优化效果最好。

{{<figure src="/images/12.png" width="60%">}}

**5.道路通行能力随自动驾驶汽车占比的变化趋势**

道路的平均车流量在自动驾驶汽车占比为50%~60%时达到峰值，随后占比升高使车流量下降，这是车辆均速和道路负载共同作用的结果。最优化的车流量可将高峰时期车流量提升至200%，整体提升至144%左右。

{{<figure src="/images/13.png" width="60%">}}

**6.车辆均速随自动驾驶汽车占比的变化趋势**

与其他结论相似，30%~60%占比的自动驾驶汽车的使用对均速提升速度最快。虽然占比100%时速度提升至最高，但这显然不是实际上的理想效果，速度过高带来许多负面影响，如导致车流量下降和更高概率的交通事故等等。

{{<figure src="/images/14.png" width="60%">}}

##### 4.3.2设置两条自动驾驶专用车道

**1.道路车辆密度随时间变化**

约$$1\over 3$$的车道设置为自动驾驶专用车道时，可以得到结论：一定比例的自动驾驶专用车道对应着适合道路通行的最优自动驾驶汽车占比。如下图，0\~50%之间的自动驾驶汽车反而使平均路面占用率增加，而在70%才达到最低（由于测试次数有限，数据点较少），也仍然没有在不使用专用车道的基础上优化。所以此时自动驾驶汽车占比在0\~20%左右才具有优化效果。

{{<figure src="/images/15.JPG" width="60%">}}

**2.车辆平均速度随时间变化**

此时自动驾驶汽车占比小于20%和大于60%时才具有提升道路通行能力的效果。

{{<figure src="/images/16.JPG" width="60%">}}

## 5.对于模型优劣的分析

### 5.1模型的优势

1. 用不同的数字代表不同种类的车和各元胞含有的车的数量，方便统计和分析；
2. 建立离散模型描述模拟不同交通状况；
3. 利用交通流-密度-和平均速度之间的关系的连续模型，对车流量和平均速度进行计算；
4. 模型整体比较简便，可在其基础上做更多的优化提升；

### 5.2模型的不足

1. 没有考虑到车辆行驶安全距离随速度的变化；
2. 对车流量的计算和对速度的定义使用了速度—密度—流量模型，比较理想化；
3. 部分假设条件较理想化，如变道条件，自动驾驶汽车性能等等；
4. 和优秀论文相比，在建模思路、分析角度、可视化方面均有较大差距。
5. 建模的思路一定程度上影响了程序的编写，导致计算效率较低。每改变一次自动驾驶汽车占比要模拟一次24小时道路运行状况，花费7-9分钟；讨论专用车道条数时问题更加突出，由于时间等原因只计算了两条专用车道下的各项数据。

## 6.可以继续讨论的问题

1. 不设置专用车道时，将使道路负载、通行能力和车辆均速均优化至最好状态的自动驾驶汽车占比缩小至更小区间；
2. 改变专用车道条数，讨论不同的自动驾驶汽车占比情况下使得道路最优化的专用车道条数；由上述讨论结果第二点可见，专用车道的数量设置问题比较复杂，需进一步讨论；
3. 增加对事故及其细节的模拟（事实上我们已经做了事故模拟，由于并不是本问题探究的内容，所以略去），随着车辆数量、均速的变化，事故发生概率和事故对道路状态的影响也不同；

## 修改记录

- 2021- 8 - 1，079组编写大致解题过程
- 2021-07-19， 张嘉乐建立模板



## 7.参考文献

[^1]: https://zhuanlan.zhihu.com/p/300649434?utm_source=qq&utm_medium=social&utm_oi=1118457582766919680
[^2]: 张瑞坤,牟丽君,刘玉霜,刘利利,基于元胞自动机的自动驾驶汽车在交通网络中的效能分析,2017(9),76-78
